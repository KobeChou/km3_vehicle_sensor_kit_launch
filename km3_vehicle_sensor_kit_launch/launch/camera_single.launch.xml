<launch>
  <!-- 单摄像头启动：用于外参标定，输出到 camera0 命名空间 -->
  <arg name="launch_driver" default="true"/>
  <arg name="input_prefix" default="/camera0" description="输入话题前缀，如 /camera0 或 /usb_cam"/>

  <group>
    <push-ros-namespace namespace="camera0"/>

    <node pkg="topic_tools" exec="relay" name="camera_info_relay" output="log">
      <param name="input_topic" value="$(var input_prefix)/camera_info"/>
      <param name="output_topic" value="camera_info"/>
      <param name="type" value="sensor_msgs/msg/CameraInfo"/>
      <param name="reliability" value="best_effort"/>
    </node>

    <node pkg="topic_tools" exec="relay" name="image_relay" output="log">
      <param name="input_topic" value="$(var input_prefix)/image_raw"/>
      <param name="output_topic" value="image_raw"/>
      <param name="type" value="sensor_msgs/msg/Image"/>
      <param name="reliability" value="best_effort"/>
    </node>

    <node pkg="topic_tools" exec="relay" name="compressed_image_relay" output="log">
      <param name="input_topic" value="$(var input_prefix)/image_raw/compressed"/>
      <param name="output_topic" value="image_raw/compressed"/>
      <param name="type" value="sensor_msgs/msg/CompressedImage"/>
      <param name="reliability" value="best_effort"/>
    </node>
  </group>
</launch>
